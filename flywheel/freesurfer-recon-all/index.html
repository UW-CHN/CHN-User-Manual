
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This is a description that ends up in the meta tag">
      
      
      
        <meta name="author" content="Center for Human Neuroscience">
      
      
        <link rel="canonical" href="https://uw-chn.github.io/CHN-User-Manual/flywheel/freesurfer-recon-all/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.3.0">
    
    
      
        <title>FreeSurfer recon-all - CHN User Manual</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8b42a75e.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/default.min.css">
    
      <link rel="stylesheet" href="../../css/custom.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#freesurfer-recon-all" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CHN User Manual" class="md-header__button md-logo" aria-label="CHN User Manual" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CHN User Manual
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              FreeSurfer recon-all
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/UW-CHN/CHN-User-Manual/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    CHN User Manual
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CHN User Manual" class="md-nav__button md-logo" aria-label="CHN User Manual" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    CHN User Manual
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/UW-CHN/CHN-User-Manual/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    CHN User Manual
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        HOME
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          SIEMENS PRISMA 3T
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SIEMENS PRISMA 3T" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          SIEMENS PRISMA 3T
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../siemens-prisma/setting-up/" class="md-nav__link">
        Setting Up and Acquiring Scans
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../siemens-prisma/epi-basic/" class="md-nav__link">
        EPI: Basic Parameter and Sequence Issues
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../siemens-prisma/epi-advanced/" class="md-nav__link">
        EPI: Advanced Parameter and Sequence Issues
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../siemens-prisma/epi-artifacts/" class="md-nav__link">
        EPI: Artifacts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../siemens-prisma/miscellaneous/" class="md-nav__link">
        Miscellaneous
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          PERIPHERALS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="PERIPHERALS" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          PERIPHERALS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../peripherals/boldscreen/" class="md-nav__link">
        BOLDscreen
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../peripherals/button-boxes/" class="md-nav__link">
        Button Boxes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../peripherals/eyelink1000-plus/" class="md-nav__link">
        EyeLink 1000 Plus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../peripherals/mock-scanner/" class="md-nav__link">
        Mock Scanner
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../peripherals/sensimetrics-s14/" class="md-nav__link">
        Sensimetrics S14
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../peripherals/physiology/" class="md-nav__link">
        Physiology
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          COMPUTATIONAL RESOURCES
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="COMPUTATIONAL RESOURCES" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          COMPUTATIONAL RESOURCES
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../computational-resources/computational-resources/" class="md-nav__link">
        Computational Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../computational-resources/hyak/" class="md-nav__link">
        Hyak
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../computational-resources/cloud/" class="md-nav__link">
        Cloud
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../computational-resources/ibic/" class="md-nav__link">
        IBIC
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          FLYWHEEL
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="FLYWHEEL" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          FLYWHEEL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../flywheel/" class="md-nav__link">
        Flywheel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cmrr-physio/" class="md-nav__link">
        CMRR Physio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../mriqc/" class="md-nav__link">
        MRIQC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bids-curation/" class="md-nav__link">
        BIDS Curation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../exporting-in-bids/" class="md-nav__link">
        Exporting Data in BIDS
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          FreeSurfer recon-all
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        FreeSurfer recon-all
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#recon-all" class="md-nav__link">
    recon-all
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-of-recon-all" class="md-nav__link">
    Output of recon-all
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recon-all-on-flywheel" class="md-nav__link">
    recon-all on Flywheel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recon-all-output-on-flywheel" class="md-nav__link">
    recon-all Output on Flywheel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reconstruction-quality-metrics" class="md-nav__link">
    Reconstruction Quality Metrics
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fmriprep/" class="md-nav__link">
        fMRIPrep
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../qsiprep/" class="md-nav__link">
        qsiprep
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6">
          APPENDIX
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="APPENDIX" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          APPENDIX
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/normal-checklist/" class="md-nav__link">
        Normal Operations Checklist
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/emergency-checklist/" class="md-nav__link">
        Emergency Checklist
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/site-documentation/" class="md-nav__link">
        Site Documentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix/contacts/" class="md-nav__link">
        Contacts
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#recon-all" class="md-nav__link">
    recon-all
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-of-recon-all" class="md-nav__link">
    Output of recon-all
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recon-all-on-flywheel" class="md-nav__link">
    recon-all on Flywheel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recon-all-output-on-flywheel" class="md-nav__link">
    recon-all Output on Flywheel
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reconstruction-quality-metrics" class="md-nav__link">
    Reconstruction Quality Metrics
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/UW-CHN/CHN-User-Manual/edit/master/docs/flywheel/freesurfer-recon-all.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="freesurfer-recon-all">FreeSurfer <code>recon-all</code><a class="headerlink" href="#freesurfer-recon-all" title="Permanent link">&para;</a></h1>
<p><a href="https://surfer.nmr.mgh.harvard.edu/fswiki/FreeSurferWiki">FreeSurfer</a> is a software package that analyzes and visualizes structural and functional neuroimaging data. It is a reputable software known for its structural MRI analysis.</p>
<p>FreeSurfer commands are called from the command line, so having some familiarity is recommended. To download and install FreeSurfer onto your preferred local machine, follow their documentation <a href="https://surfer.nmr.mgh.harvard.edu/fswiki/DownloadAndInstall">here</a>. </p>
<p>An important step in the installation process is obtaining a <a href="https://surfer.nmr.mgh.harvard.edu/registration.html">license key</a>. This step is critical because the license key file is required in order to use Freesurfer on Flywheel.</p>
<h2 id="recon-all"><code>recon-all</code><a class="headerlink" href="#recon-all" title="Permanent link">&para;</a></h2>
<p><a href="https://surfer.nmr.mgh.harvard.edu/fswiki/recon-all"><code>recon-all</code></a> is the command that implements FreeSurfer's cortical reconstruction process. The reconstruction process is multi-stepped and the details are explained on FreeSurfer's <code>recon-all</code> <a href="https://surfer.nmr.mgh.harvard.edu/fswiki/ReconAllDevTable">process flow</a> page.</p>
<h3 id="common-commands">Common Commands<a class="headerlink" href="#common-commands" title="Permanent link">&para;</a></h3>
<p>Users are able to have <code>recon-all</code> perform any part of the cortical reconstruction pipeline with additional arguments. But most commonly, users specify <code>recon-all</code> to perform <em>all</em> parts of the cortical reconstruction.Below are common commands one would use to call <code>recon-all</code>.</p>
<p>Command to perform all parts of cortical reconstruction on a T1-weighted image.</p>
<pre><code class="language-bash">recon-all \
    -s &quot;output_directory_name&quot; \
    -sd &quot;/path/to/output/directory&quot; \
    -i &quot;/path/to/t1/weighted/image/file&quot; \
    -all
</code></pre>
<p>Command to perform all parts of cortical reconstruction on a T1-weighted image while also <a href="https://surfer.nmr.mgh.harvard.edu/fswiki/recon-all#UsingT2orFLAIRdatatoimprovepialsurfaces">specifying a T2-weighted image to improve pial surfaces</a>.</p>
<pre><code class="language-bash">recon-all \
    -s &quot;output_directory_name&quot; \
    -sd &quot;/path/to/output/directory&quot; \
    -i &quot;/path/to/t1/weighted/image/file&quot; \
    -T2 &quot;/path/to/t2/weighted/image/file&quot; \
    -T2pial \
    -all
</code></pre>
<h2 id="output-of-recon-all">Output of <code>recon-all</code><a class="headerlink" href="#output-of-recon-all" title="Permanent link">&para;</a></h2>
<p>When <code>recon-all</code> finishes processing, the resulting output directory (with a few notable files) is shown in the following diagram:</p>
<pre><code class="language-plaintext">output_directory
├── label
├── mri
│   ├── brain.mgz
│   ├── orig.mgz
│   └── ...
├── scripts
│   ├── recon-all.log
│   └── ...
├── stats
├── surf
│   ├── ?h.inflated
│   ├── ?h.orig
│   └── ...
├── tmp
├── touch
└── trash
</code></pre>
<h2 id="recon-all-on-flywheel"><code>recon-all</code> on Flywheel<a class="headerlink" href="#recon-all-on-flywheel" title="Permanent link">&para;</a></h2>
<p>A good question to ask is why you should run <code>recon-all</code> on Flywheel when it can be performed locally? Well, <code>recon-all</code> is a notoriously time consuming computational process. It has been documented that processing one subject could take 6 - 24 hours depending on the computer's processor. Whereas, performing <code>recon-all</code> through Flywheel would use the (cloud) processors Flywheel is hosted on. This not only potentially speeds up the whole process, but also frees up the computational load from your local machine.</p>
<h3 id="run-the-gear">Run the Gear<a class="headerlink" href="#run-the-gear" title="Permanent link">&para;</a></h3>
<p>Below are the steps to run <code>recon-all</code> through Flywheel's gear mechanism.</p>
<ol>
<li>
<p><a href="https://docs.flywheel.io/hc/en-us/articles/360013235453"><strong>Attach your FreeSurfer license file to the Project</strong></a>. A valid FreeSurfer license <em>must</em> be available in order to use the <code>recon-all</code> gear.</p>
<p><figure class="double-border">
    <img src="../../img/flywheel-project-files.jpg" alt="Example of a license.txt file attached at the Project level.">          <br />
</figure></p>
</li>
<li>
<p><strong>Select the "Run Gear" button.</strong> The button is located under the "Acquisitions" tab in the upper right hand corner.</p>
<p><figure class="double-border">
    <img src="../../img/flywheel-run-gear.jpg" alt="BIDS Curation Run Gear button">
</figure></p>
</li>
<li>
<p>A pop-up will appear, <strong>select "Analysis Gear"</strong>.</p>
<p><figure class="double-border">
    <img src="../../img/flywheel-analysis-gear.jpg" alt="BIDS Curation Analysis Gear button">
</figure></p>
</li>
<li>
<p>In the "Select Gear" dropdown menu, there should be a <strong>"FreeSurfer 7.X.X: run recon-all"</strong> option. </p>
<p><figure class="double-border">
    <img src="../../img/freesurfer-recon-all.jpg" alt="FreeSurfer recon-all gear in the gear selection dropdown menu">
</figure></p>
<p>If the FreeSurfer <code>recon-all</code> gear does not exist for your project and it should, please contact John Pyles at <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#106;&#111;&#104;&#110;&#112;&#64;&#117;&#119;&#46;&#101;&#100;&#117;">&#106;&#111;&#104;&#110;&#112;&#64;&#117;&#119;&#46;&#101;&#100;&#117;</a>.</p>
</li>
<li>
<p>In the "Inputs" tab, <strong>select the "Choose Input"</strong> button for the: </p>
<ol>
<li><code>anatomical</code>: i.e., T1-weighted image file</li>
<li><code>freesurfer_license</code>: the FreeSurfer <code>license.txt</code> file</li>
<li>(<em>Optional</em>) <code>t2w_anatomical</code>: i.e., T2-weighted image file</li>
</ol>
<p><figure class="double-border">
    <img src="../../img/freesurfer-recon-all-inputs.jpg" alt="Example of FreeSurfer recon-all's input dialog menu">
</figure></p>
<p>Also consider re-naming the "Analysis Label" section with additional information beyond the processing start time, such as the T1-weighted image file name. </p>
</li>
<li>
<p>In the <strong>"Configuration" tab</strong>, modify the desired <code>recon-all</code> options.</p>
<p><figure class="double-border">
    <img src="../../img/freesurfer-recon-all-config.jpg" alt="Example of FreeSurfer recon-all's configuration options">
</figure></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is highly recommended to use the "parallel" option. This allows <code>recon-all</code> to process in parallel, which greatly speeds up the computational processing time. The default is to have the parallel selected, but checking the configuration options is good practice.</p>
</div>
</li>
<li>
<p>Select <strong>"Run Gear"</strong> in the bottom right-hand corner and wait &gt; 6 hours.</p>
</li>
</ol>
<h2 id="recon-all-output-on-flywheel"><code>recon-all</code> Output on Flywheel<a class="headerlink" href="#recon-all-output-on-flywheel" title="Permanent link">&para;</a></h2>
<p>Once <code>recon-all</code> is finished, the results will appear in the session's "Analyses" tab. Refer to the <a href="https://docs.flywheel.io/hc/en-us/articles/360015505453">Analysis Gear documentation</a> for images and more details about analysis gears on Flywheel.</p>
<p>Here is an example output from <code>recon-all</code>. The image has been truncated and does not show every output file created by the <code>recon-all</code> gear. All output files can be downloaded as apart of the entire analysis or individually by selecting the <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 192 512"><path d="M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z"/></svg></span> icon.</p>
<figure class="double-border">
    <img src="../../img/freesurfer-recon-all-output-1.jpg" alt="Example of FreeSurfer recon-all analysis gear output">
</figure>

<p>There will be a zip file located within the output files (see below). Unzipping the archived file will produce the usual <code>recon-all</code> <a href="#output-of-recon-all">output</a>.</p>
<figure class="double-border">
    <img src="../../img/freesurfer-recon-all-output-2.jpg" alt="Example of FreeSurfer recon-all analysis gear output zip file">
</figure>

<h2 id="reconstruction-quality-metrics">Reconstruction Quality Metrics<a class="headerlink" href="#reconstruction-quality-metrics" title="Permanent link">&para;</a></h2>
<p>There are a few metrics that FreeSurfer is capable of calculating that may be of interest to people attempting to quantitatively assess the reconstruction results. </p>
<h3 id="euler-number">Euler Number<a class="headerlink" href="#euler-number" title="Permanent link">&para;</a></h3>
<p>The <a href="https://bookdown.org/u0243256/tbicc/freesurfer.html#euler">euler number</a> describes the topographical complexity of the reconstructed cortical surface. The formula for the euler number is <span class="arithmatex">\(\mathrm{euler} = 2 - 2g\)</span>, where <span class="arithmatex">\(g\)</span> is the number of holes in the surface. Therefore, the euler number for a flat and smooth surface with no holes (<span class="arithmatex">\(g = 0\)</span>) is 2. </p>
<p>A good surface reconstruction algorithm aims to minimize the number of holes, <span class="arithmatex">\(g\)</span>, in the surface. This means the closer the surface's euler number comes to 2, the better the reconstruction, which implies better data quality (see <a href="https://doi.org/10.1016/j.neuroimage.2017.12.059">Rosen et al., 2018)</a>). </p>
<p>The following command can be called from the command line to find the euler number and number of holes for each hemisphere: </p>
<pre><code class="language-shell">$ grep -A2 &quot;Computing euler&quot; &quot;/path/to/.../scripts/recon-all.log&quot;
Computing euler number
orig.nofix lheno =  -20, rheno = -34
orig.nofix lhholes =   11, rhholes = 18
</code></pre>
<h3 id="contrast-to-noise-ratios">Contrast-to-Noise Ratios<a class="headerlink" href="#contrast-to-noise-ratios" title="Permanent link">&para;</a></h3>
<p>Contrast-to-noise ratio (CNR) is the difference in signal intensities between regions classified as different tissues types vs. the background (noise). Therefore, the greater the CNR value, the greater the contrast (and algorithmic separability) between the two tissues types.</p>
<p>FreeSurfer calculates the gray/white matter and gray matter/cerebral spinal fluid (CSF) CNR values for each hemisphere with the <code>mri_cnr</code> command.</p>
<pre><code class="language-shell">$ mri_cnr &quot;/path/to/.../surf&quot; &quot;path/to/.../mri/norm.mgz&quot;
processing MRI volume /.../freesurfer/7.X.X/.../mri/norm.mgz...
    white = 96.8+-6.1, gray = 76.0+-13.6, csf = 56.0+-16.6
    gray/white CNR = 1.921, gray/csf CNR = 0.871
lh CNR = 1.396
    white = 96.7+-6.3, gray = 76.4+-13.4, csf = 56.3+-16.2
    gray/white CNR = 1.880, gray/csf CNR = 0.905
rh CNR = 1.392
total CNR = 1.394
</code></pre>
<p>Each hemisphere's CNR value is the average of the hemisphere's gray/white and gray/CSF CNR values, and the total CNR value is the average of the two hemisphere's CNR values.</p>
<p>For comparisons of CNR values, see <a href="https://doi.org/10.1186/1471-2342-12-27">Chalavi et al. (2012)</a>.</p>
                
                  
                    

<hr>
<div class="md-source-date">
  <small>
    
      Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 4, 2021</span>
      
    
  </small>
</div>
                  
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../exporting-in-bids/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Exporting Data in BIDS" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Exporting Data in BIDS
            </div>
          </div>
        </a>
      
      
        
        <a href="../fmriprep/" class="md-footer__link md-footer__link--next" aria-label="Next: fMRIPrep" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              fMRIPrep
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021 Center for Human Neuroscience
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.f8263e09.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.4fc53ad4.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/highlight.min.js"></script>
      
        <script src="../../js/config.js"></script>
      
    
  </body>
</html>